
<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <title>OCHAT</title>
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
Â  html, body {
Â Â Â  height: 100%;
Â Â Â  margin: 0;
Â Â Â  padding: 0;
Â  }

Â  body {
Â Â Â  display: flex;
Â Â Â  flex-direction: column;
Â Â Â  font-family: Arial, sans-serif;
Â  }

Â  header {
Â Â Â  background: #222;
Â Â Â  color: white;
Â Â Â  padding: 1rem;
Â Â Â  text-align: center;
Â  }

Â  #chat-box {
Â Â Â  flex: 1;
Â Â Â  padding: 1rem;
Â Â Â  background: #f3f3f3;
Â Â Â  overflow-y: auto;
Â  }

Â  .message {
Â Â Â  margin: 0.5rem 0;
Â Â Â  border-radius: 5px;
Â Â Â  padding: 0.5rem;
Â Â Â  max-width: 80%;
Â  }

Â  .you {
Â Â Â  background: #0078d7;
Â Â Â  color: white;
Â Â Â  margin-left: auto;
Â  }

Â  .stranger {
Â Â Â  background: #e0e0e0;
Â Â Â  margin-right: auto;
Â  }

Â  #controls {
Â Â Â  display: flex;
Â Â Â  padding: 0.5rem;
Â Â Â  background: #ddd;
Â Â Â  gap: 0.5rem;
Â  }

Â  #message-input {
Â Â Â  flex: 1;
Â Â Â  padding: 0.5rem;
Â  }

Â  button {
Â Â Â  padding: 0.5rem 1rem;
Â Â Â  background: #0078d7;
Â Â Â  color: white;
Â Â Â  border: none;
Â Â Â  border-radius: 4px;
Â  }

Â  button:hover {
Â Â Â  background: #005fa3;
Â  }
</style>
Â  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
<div id="age-warning" style="
Â  position: fixed;
Â  z-index: 9999;
Â  inset: 0;
Â  background-color: rgba(0, 0, 0, 0.9);
Â  display: flex;
Â  flex-direction: column;
Â  align-items: center;
Â  justify-content: center;
Â  color: white;
Â  font-family: sans-serif;
Â  text-align: center;
Â  padding: 30px;
">
Â  <h1>ðŸ”ž Age Restriction</h1>
Â  <p style="max-width: 400px;">
Â Â Â  This website is intended for users 18 years of age or older. By clicking "Yes", you confirm that you are 18+.
Â  </p>
Â  <div style="margin-top: 20px;">
Â Â Â  <button onclick="acceptAge()" style="padding: 10px 20px; margin-right: 10px;">Yes, I'm 18+</button>
Â Â Â  <button onclick="denyAge()" style="padding: 10px 20px;">No, Exit</button>
Â  </div>
</div>
Â  <header>OCHAT</header>

Â  <div id="chat-box"></div>
Â  <p id="typing-indicator" style="font-style: italic; margin: 0.5rem 1rem; color: gray;"></p>

Â  <div id="controls">
Â Â Â  <input type="text" id="message-input" placeholder="Type your message..." />
Â Â Â  <button onclick="sendMessage()">Send</button>
Â Â Â  <button onclick="nextChat()">Next</button>
Â  </div>

Â  <script>
Â Â Â  const backendURL = "https://omegle-backend-j8q7.onrender.com";
Â Â Â  const socket = io(backendURL);

Â Â Â  const chatBox = document.getElementById("chat-box");
Â Â Â  const input = document.getElementById("message-input");

Â Â Â  function appendMessage(who, text) {
Â Â Â Â Â  const div = document.createElement("div");
Â Â Â Â Â  div.className = "message " + who;
Â Â Â Â Â  div.textContent = (who === "you" ? "You: " : "Stranger: ") + text;
Â Â Â Â Â  chatBox.appendChild(div);
Â Â Â Â Â  chatBox.scrollTop = chatBox.scrollHeight;
Â Â Â  }

Â Â Â  socket.on("matched", () => {
Â Â Â Â Â  chatBox.innerHTML = "";
Â Â Â Â Â  appendMessage("stranger", "You've been matched with a stranger.");
Â Â Â  });

Â Â Â  socket.on("message", (msg) => appendMessage("stranger", msg));

Â Â Â  
Â Â Â  socket.on("partner-left", () => appendMessage("stranger", "Stranger left the chat."));

Â Â Â  function sendMessage() {
Â Â Â Â Â  const msg = input.value.trim();
Â Â Â Â Â  if (msg) {
Â Â Â Â Â Â Â  appendMessage("you", msg);
Â Â Â Â Â Â Â  socket.emit("message", msg);
Â Â Â Â Â Â Â  input.value = "";
Â Â Â Â Â  }
Â Â Â  }

Â Â Â  function nextChat() {
Â Â Â Â Â  chatBox.innerHTML = "";
Â Â Â Â Â  socket.emit("next");
Â Â Â  }
Â Â Â  const messageInput = document.getElementById("message-input");

// Create and style the typing indicator
const typingStatus = document.createElement("div");
typingStatus.id = "typing-status";
typingStatus.style.fontStyle = "italic";
typingStatus.style.padding = "0.5rem";
document.getElementById("chat-box").appendChild(typingStatus);

// Emit typing and stop_typing events
let typingTimeout;
messageInput.addEventListener("input", () => {
Â  socket.emit("typing");

Â  clearTimeout(typingTimeout);
Â  typingTimeout = setTimeout(() => {
Â Â Â  socket.emit("stop_typing");
Â  }, 1000); // emit stop_typing after 1 second of inactivity
});
    // Show/hide the typing indicator based on socket events
socket.on("typing", () => {
Â  typingStatus.textContent = "Stranger is typing...";
});

socket.on("stop_typing", () => {
Â  typingStatus.textContent = "";
});

Â Â  socket.on("warning", (msg) => {
Â  const warningBox = document.createElement("div");
Â  warningBox.textContent = msg;
Â  warningBox.style.color = "red";
Â  warningBox.style.margin = "10px";
Â  warningBox.style.fontWeight = "bold";
Â  document.body.appendChild(warningBox);

Â  // Automatically remove the warning after 2 seconds
Â  setTimeout(() => {
Â Â Â  warningBox.remove();
Â  }, 2000);
});
Â Â Â  
Â  </script>
<script>
Â  function acceptAge() {
Â Â Â  localStorage.setItem("ageVerified", "true");
Â Â Â  document.getElementById("age-warning").style.display = "none";
Â  }

Â  function denyAge() {
Â Â Â  alert("Access denied. Redirecting...");
Â Â Â  window.location.href = "https://www.google.com"; // or your warning/exit page
Â  }

Â  window.onload = function () {
Â Â Â  const verified = localStorage.getItem("ageVerified");
Â Â Â  if (verified === "true") {
Â Â Â Â Â  document.getElementById("age-warning").style.display = "none";
Â Â Â  }
Â  };
</script>
</body>
</html>
